/**
 * Migration script: Move hardcoded data to Supabase
 * Run with: npx tsx scripts/migrate-to-supabase.ts
 */

import { createClient } from '@supabase/supabase-js';
import * as dotenv from 'dotenv';
import * as path from 'path';

// Load environment variables
dotenv.config({ path: path.join(__dirname, '..', '.env.local') });

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;

if (!supabaseUrl || !supabaseServiceKey) {
  console.error('Missing Supabase environment variables');
  process.exit(1);
}

const supabase = createClient(supabaseUrl, supabaseServiceKey);

// =============================================================================
// ARTICLES DATA (from articles.ts)
// =============================================================================

const articles = [
  {
    slug: "renovation-costs-2026",
    title: "כמה באמת עולה שיפוץ דירה ב-2026?",
    excerpt: "מחירון מפורט לפי סוג שיפוץ, גודל דירה, ועלויות נסתרות שחייבים להכיר",
    category: "תקציב",
    reading_time: 5,
    related_slugs: ["contractor-quotes", "budget-checklist"],
    content: `
# כמה באמת עולה שיפוץ דירה ב-2026?

זו השאלה הראשונה שכל מי שמתכנן שיפוץ שואל, ובצדק. הבעיה היא שאין תשובה אחת - הכל תלוי בסוג השיפוץ, בגודל הדירה, ובאיזה שלב אתם תופסים את עצמכם.

אז בואו נפרק את זה לפי מחירוני שוק 2025-2026.

## שלוש רמות שיפוץ

### שיפוץ קוסמטי (300-600₪ למ"ר)
הכי קל והכי זול. מדובר בעיקר ב:
- צביעה מחדש
- החלפת דלתות פנים
- חידוש רצפות (פרקט צף, למשל)
- תאורה חדשה

**דירת 70 מ"ר**: מ-15,000₪ ומעלה

### שיפוץ מקיף / קומפלט (1,200-2,000₪ למ"ר)
כאן כבר מדברים על עבודה רצינית:
- פירוק ובנייה של קירות
- החלפת אינסטלציה וחשמל
- ריצוף חדש
- חדרי רטיבות מלאים
- מטבח חדש

**דירת 100 מ"ר**: 120,000-200,000₪ (בלי מטבח ואביזרים)

### שיפוץ יוקרה (2,000-5,000₪+ למ"ר)
כאן השמים הם הגבול:
- חומרים פרימיום
- עיצוב אדריכלי
- פתרונות מותאמים אישית
- מותגים מובילים

## עלויות ספציפיות שכדאי להכיר

| פריט | מחיר |
|------|------|
| שיפוץ חדר אמבטיה מלא | 10,000-16,000₪ |
| מטבח סטנדרטי | 30,000-40,000₪ (יכול להגיע ל-100,000₪+) |
| צביעת דירת 3 חדרים | ~890₪ |
| צביעת דירת 4 חדרים | ~990₪ |
| ריצוף עם דבק | 160₪ למ"ר |
| תקרת גבס | 150₪ למ"ר |
| מכולת פסולת | 1,000-1,500₪ למכולה |

## הכלל הכי חשוב: 15-20% תוספת!

לא משנה כמה תכננתם טוב - תמיד יהיו הפתעות. צינור חלוד, חשמל שצריך שדרוג, בעיית רטיבות שהתגלתה. 

**תמיד שמרו 15-20% מהתקציב להוצאות בלתי צפויות.**

זה לא פסימיות - זה ריאליזם. מי שלא משאיר מרווח, מוצא את עצמו באמצע שיפוץ בלי כסף לסיים.

## טיפ אחרון

קבלו לפחות 3 הצעות מחיר, השוו אותן בכתב כמויות מפורט, ואל תלכו על הזול ביותר אוטומטית. הזול ביותר הוא לרוב גם זה שיעלה לכם הכי הרבה בסוף.
`
  },
  {
    slug: "common-mistakes",
    title: "10 טעויות נפוצות בשיפוץ וכיצד להימנע מהן",
    excerpt: "הטעויות שעולות הכי הרבה כסף - ואיך להימנע מהן עוד לפני שמתחילים",
    category: "טיפים",
    reading_time: 6,
    related_slugs: ["choosing-contractor", "budget-checklist"],
    content: `
# 10 טעויות נפוצות בשיפוץ וכיצד להימנע מהן

אחרי שנים של שיפוצים בישראל, יש טעויות שחוזרות על עצמן שוב ושוב. הנה הרשימה שתחסוך לכם כאב ראש - וכסף.

## 1. לקפוץ לשיפוץ בלי תכנון

"נתחיל ונראה" זו המתכון הבטוח לכאוס. לפני שפורצים קיר אחד:
- תכננו את כל החללים
- קבעו תקציב מפורט
- הכינו לוח זמנים ריאלי

## 2. לבחור את הקבלן הכי זול

הצעת המחיר הזולה ביותר היא כמעט תמיד לא הצעת המחיר הטובה ביותר. קבלן שמציע 30% פחות מהשוק - או שהוא לא מבין מה העבודה כוללת, או שהוא יפצה על זה בתוספות.

**לפי מחירוני שוק 2025-2026**: אם כולם מצטטים 150,000₪ ומישהו אומר 90,000₪ - זה אמור להדליק נורה אדומה.

## 3. להתעלם מהתשתיות

"הצנרת נראית בסדר" - זה מה שכולם אומרים עד שמתחילים לפרק. תשתיות ישנות (חשמל, אינסטלציה) הן פצצה מתקתקת.

אם הדירה בת 20+ שנה - שדרגו תשתיות. זה ישתלם בטווח הארוך.

## 4. לשנות החלטות באמצע

"בעצם, בוא נזיז את הכיור למקום אחר" - משפט שעולה אלפי שקלים. כל שינוי באמצע עבודה = עיכוב + עלות נוספת.

תקבעו החלטות סופיות לפני תחילת העבודה.

## 5. לחסוך על איטום

חדרי רטיבות חייבים איטום מקצועי. זה לא המקום לחסוך. נזילה שמתגלה שנה אחרי השיפוץ תעלה פי 10 מאיטום נכון מראש.

## 6. לא לבקש כתב כמויות

הצעת מחיר כללית ("שיפוץ מטבח - 35,000₪") היא חסרת ערך. דרשו כתב כמויות מפורט שמפרט כל פריט ועלותו.

## 7. לשלם הכל מראש

תשלומים צריכים להיות לפי התקדמות העבודה:
- 20% בהתחלה (לחומרים)
- 30% באמצע
- 30% לקראת הסוף
- 20% אחרי סיום ותיקונים

**אף פעם לא 100% מראש.**

## 8. לא לתעד

צלמו הכל. כל שלב, כל תשתית לפני שנסגרת. זה יציל אתכם כשתצטרכו לדעת איפה עובר צינור בעוד 5 שנים.

## 9. להתעלם מהיתרים

עבודות מסוימות דורשות היתר בנייה. לדלג על זה יכול להוביל לקנסות ואפילו לצו הריסה.

## 10. לשכוח את העלויות הנלוות

מחיר השיפוץ הוא לא רק עבודה וחומרים:
- מכולות פסולת: 1,000-1,500₪ למכולה
- דיור חלופי אם לא גרים בדירה
- אחסון רהיטים
- 15-20% לבלת"מים

תתכננו את הכל, לא רק את העבודה עצמה.
`
  },
  {
    slug: "choosing-contractor",
    title: "איך לבחור קבלן שיפוצים - מדריך מלא",
    excerpt: "5 צעדים לבחירת קבלן אמין שיסיים את העבודה בזמן ובתקציב",
    category: "קבלנים",
    reading_time: 5,
    related_slugs: ["contractor-quotes", "common-mistakes"],
    content: `
# איך לבחור קבלן שיפוצים - מדריך מלא

בחירת קבלן היא ההחלטה הכי חשובה בשיפוץ. קבלן טוב = שיפוץ חלק. קבלן גרוע = סיוט שנמשך חודשים.

הנה איך לבחור נכון.

## שלב 1: קבלו לפחות 3 הצעות מחיר

לא 1, לא 2 - לפחות 3. זה נותן לכם:
- טווח מחירים ריאלי
- אפשרות להשוואה
- כוח מיקוח

## שלב 2: בדקו המלצות - ברצינות

כל קבלן ייתן לכם טלפונים של לקוחות מרוצים. אבל:
- דברו עם הלקוחות בטלפון, לא רק בווטסאפ
- שאלו שאלות ספציפיות: האם סיים בזמן? חרג מהתקציב? איך היה התקשורת?
- בקשו לראות תמונות של העבודה

## שלב 3: בקרו בפרויקט קודם

קבלן רציני יסכים לתת לכם לראות עבודה שעשה. אם הוא מסרב - סימן שאלה.

שימו לב ל:
- איכות הגימור
- פרטים קטנים (פינות, חיבורים)
- האם הלקוח באמת מרוצה

## שלב 4: ודאו רישיונות וביטוחים

קבלן צריך:
- רישום קבלנים (לעבודות מעל סכום מסוים)
- ביטוח צד ג'
- ביטוח עובדים

**אל תוותרו על זה.** אם קורה משהו באתר ואין ביטוח - אתם בבעיה.

## שלב 5: דרשו כתב כמויות מפורט

כתב כמויות הוא המסמך הכי חשוב. הוא מפרט:
- כל עבודה ועלותה
- כל חומר ומחירו
- מה כלול ומה לא

בלי כתב כמויות, אין לכם על מה לעמוד אם יש ויכוח.

## שאלות שחייבים לשאול

1. **מה לוח הזמנים?** קבלו תאריכים ספציפיים
2. **מי יהיה באתר?** הקבלן עצמו או עובדים?
3. **מה קורה אם יש עיכוב?** האם יש פיצוי?
4. **איך התשלומים?** לפי שלבים, לא הכל מראש
5. **מה האחריות?** כמה זמן אחרי סיום?

## נורות אדומות

🚩 מבקש תשלום מלא מראש
🚩 אין חוזה כתוב
🚩 לא מוכן לתת המלצות
🚩 מחיר נמוך משמעותית מהשוק
🚩 לא זמין לשאלות

## הסכם כתוב - חובה

גם אם זה "חבר של חבר" - חוזה כתוב הוא חובה. הוא צריך לכלול:
- פירוט עבודות
- לוח זמנים
- תנאי תשלום
- אחריות
- מה קורה בביטול

קבלן שמסרב לחתום על חוזה? תודה, להתראות.
`
  },
  {
    slug: "contractor-quotes",
    title: "מה לבדוק בהצעת מחיר מקבלן",
    excerpt: "המדריך לקריאת הצעות מחיר - מה חייב להיות ומה מסתירים ממכם",
    category: "קבלנים",
    reading_time: 4,
    related_slugs: ["choosing-contractor", "renovation-costs-2026"],
    content: `
# מה לבדוק בהצעת מחיר מקבלן

קיבלתם הצעת מחיר? מעולה. עכשיו צריך לדעת לקרוא אותה. הנה מה לחפש.

## כתב כמויות - הבסיס של הכל

כתב כמויות טוב מפרט **כל פריט בנפרד**:

❌ "שיפוץ אמבטיה - 12,000₪" - לא טוב
✅ "פירוק ריצוף קיים - 800₪, איטום - 1,500₪, ריצוף 6 מ"ר × 160₪..." - מצוין

למה זה חשוב? כי ככה אתם יכולים:
- להשוות בין הצעות
- לדעת על מה אתם משלמים
- לזהות אם משהו חסר

## מה חייב להיות בהצעה

### פירוט עבודות
- כל עבודה בנפרד
- כמויות (מ"ר, יחידות)
- מחיר ליחידה

### חומרים
- מה כלול במחיר
- איזה סוג/מותג
- מה הלקוח מספק

### לוח זמנים
- תאריך התחלה
- משך כל שלב
- תאריך סיום

### תנאי תשלום
- כמה בכל שלב
- מתי משלמים
- איך משלמים

## נורות אדומות בהצעות מחיר

🚩 **"עבודות נוספות לפי הצורך"** - מתכון לחשבון מנופח
🚩 **מחיר כולל בלי פירוט** - אין לכם מושג על מה משלמים
🚩 **"לא כולל..."** ארוך - בדקו שלא חסרות עבודות חיוניות
🚩 **100% תשלום מראש** - סכנה!

## איך להשוות הצעות

לא משווים מחיר סופי - משווים לפי פריטים:

| פריט | הצעה א' | הצעה ב' |
|------|---------|---------|
| ריצוף (למ"ר) | 160₪ | 180₪ |
| גבס (למ"ר) | 150₪ | 140₪ |
| צביעה (לחדר) | 300₪ | 280₪ |

לפי מחירוני שוק 2025-2026, מחירים סבירים:
- ריצוף עם דבק: ~160₪/מ"ר
- תקרת גבס: ~150₪/מ"ר
- צביעת דירת 3 חדרים: ~890₪

## שאלות לשאול על ההצעה

1. מה לא כלול שאני צריך?
2. האם יש אפשרות לחריגה? על מה?
3. מה קורה אם מתגלות בעיות?
4. האם המחירים כוללים מע"מ?
5. כמה זמן ההצעה תקפה?

## טיפ זהב

קחו את ההצעה הכי מפורטת ותשתמשו בה כבסיס להשוואה עם האחרות. בקשו מהקבלנים האחרים להתייחס לאותם פריטים - ככה ההשוואה אמיתית.
`
  },
  {
    slug: "kitchen-renovation",
    title: "שיפוץ מטבח - משולש הזהב וטיפים חיוניים",
    excerpt: "איך לתכנן מטבח שעובד - מארגונומיה ועד תזמון נכון של ההזמנות",
    category: "חדרים",
    reading_time: 5,
    related_slugs: ["bathroom-renovation", "renovation-costs-2026"],
    content: `
# שיפוץ מטבח - משולש הזהב וטיפים חיוניים

המטבח הוא הלב של הבית - וגם החלק היקר ביותר בשיפוץ. לפי מחירוני שוק 2025-2026, מטבח סטנדרטי עולה 30,000-40,000₪, ויכול להגיע בקלות ל-100,000₪ ומעלה.

אז איך עושים את זה נכון?

## משולש הזהב

העיקרון הכי חשוב בתכנון מטבח הוא **משולש העבודה** - המרחק בין:
- המקרר (אחסון)
- הכיור (הכנה)
- הכיריים (בישול)

שלושת האלמנטים האלה צריכים ליצור משולש עם צלעות של 1.2-2.7 מטר כל אחת.

**למה זה חשוב?** כי במטבח אתם נעים כל הזמן בין שלושת הנקודות האלה. מרחק גדול מדי = עייפות. קטן מדי = צפיפות.

## גישה לאינסטלציה

נקודה קריטית שרבים שוכחים: **הכיור חייב גישה נוחה לאינסטלציה**.

אם אתם מזיזים את הכיור למקום חדש, תצטרכו להאריך צנרת. זה אפשרי, אבל:
- עולה כסף
- דורש שיפוע נכון לניקוז
- יכול להיות מוגבל בדירות מסוימות

תכננו את מיקום הכיור בהתאם לנקודות האינסטלציה הקיימות.

## הזמנת משטח - רק אחרי ארונות!

זו אחת הטעויות הכי יקרות: להזמין משטח שיש או קוריאן **לפני** שהארונות במקום.

**התהליך הנכון:**
1. התקנת ארונות תחתונים
2. מדידה מדויקת למשטח
3. הזמנה ויצור (2-3 שבועות)
4. התקנת משטח

משטח שיוצר לפי מידות שגויות = זריקה לפח.

## מה לא לשכוח

### חשמל
- מספיק שקעים (יותר ממה שחושבים)
- נקודה ייעודית לתנור
- נקודה למדיח

### תאורה
- תאורת עבודה מתחת לארונות עליונים
- תאורה כללית
- אפשרות לדימר

### אוורור
- קולט אדים חזק מספיק
- פתח אוורור לחוץ (לא רק פילטר)

## תקציב ריאלי

לפי מחירוני שוק 2025-2026:

| פריט | טווח מחירים |
|------|-------------|
| ארונות מטבח בסיסיים | 15,000-25,000₪ |
| משטח קוריאן | 400-600₪/מ"ר |
| משטח גרניט | 800-1,500₪/מ"ר |
| כיור + ברז | 1,500-5,000₪ |
| מכשירי חשמל | 10,000-30,000₪ |

**סה"כ מטבח ממוצע: 30,000-40,000₪**

## טיפ חשוב לסיום

אל תחסכו על איכות הארונות וההרדוורה (צירים, מגירות). אלה הדברים שתשתמשו בהם 20 פעם ביום למשך שנים. ציר זול ישבר אחרי שנתיים. ציר טוב יחזיק עשרים.
`
  },
  {
    slug: "bathroom-renovation",
    title: "שיפוץ חדר אמבטיה - מה חובה לדעת",
    excerpt: "מאיטום ועד מרווחי אריחים - כל מה שצריך לשיפוץ אמבטיה מוצלח",
    category: "חדרים",
    reading_time: 5,
    related_slugs: ["kitchen-renovation", "infrastructure"],
    content: `
# שיפוץ חדר אמבטיה - מה חובה לדעת

חדר האמבטיה הוא אחד החדרים הכי קטנים בבית - אבל אחד היקרים לשיפוץ. לפי מחירוני שוק 2025-2026, שיפוץ אמבטיה מלא עולה 10,000-16,000₪.

למה כל כך יקר? כי יש המון עבודה בשטח קטן.

## כלל ברזל: החליפו תשתיות

אם הדירה בת 15-20 שנה ומעלה - **החליפו את כל התשתיות**. כל הצנרת, כל החשמל.

למה?
- צנרת ישנה = סיכון לנזילות
- תשתיות נסתרות אחרי הריצוף - אי אפשר לתקן בלי לפרק
- עלות החלפה עכשיו vs. עלות תיקון בעוד 3 שנים = פי 10

**תשתיות חדשות מחזיקות 20+ שנה.** זו השקעה שמשתלמת.

## איטום - אל תחסכו!

איטום הוא הדבר הכי חשוב בחדר רטיבות. איטום גרוע = עובש, נזילות, נזק לשכנים.

**מה צריך לאטום:**
- כל הרצפה
- הקירות עד גובה 20 ס"מ לפחות
- אזור המקלחת - עד התקרה

**סוגי איטום:**
- ממברנה (הכי נפוץ)
- ביטומן
- איטום אקרילי

**חשוב:** לתת לאיטום להתייבש לפני הריצוף. לא לדלג על שלבים.

## מרווחי אריחים - מקסימום 3 מ"מ

מרווחים גדולים מדי בין האריחים זו בעיה:
- אגירת לכלוך
- קושי בניקוי
- מראה לא אסתטי

**הכלל: מרווח של 2-3 מ"מ, לא יותר.**

שימו לב שהרובה (החומר בין האריחים) יהיה איכותי ואנטי עובש.

## תכנון נכון של נקודות

לפני שמתחילים, תכננו:
- איפה הכיור
- איפה האסלה
- איפה המקלחת/אמבטיה
- איפה מכונת הכביסה (אם רלוונטי)

כל הזזה של נקודות אלה = עבודת אינסטלציה נוספת = עלות.

## רשימת בדיקה לפני סיום

✅ אין לחץ מים נמוך
✅ ניקוז תקין (מים לא נשארים על הרצפה)
✅ אין נזילות מאף נקודה
✅ כל האביזרים יציבים
✅ הארקה לחשמל תקינה
✅ אוורור עובד

## תקציב מפורט

| פריט | מחיר |
|------|------|
| פירוק + פינוי | 1,500-2,500₪ |
| אינסטלציה | 2,000-4,000₪ |
| איטום | 1,000-2,000₪ |
| ריצוף קירות ורצפה | 3,000-5,000₪ |
| אביזרים (אסלה, כיור, ברזים) | 2,000-5,000₪ |

**טיפ:** קנו אביזרים סניטריים ממותג מוכר עם אחריות. הזול ביותר לא תמיד משתלם.
`
  },
  {
    slug: "best-time-to-renovate",
    title: "מתי הכי כדאי לשפץ? קיץ vs חורף",
    excerpt: "היתרונות והחסרונות של כל עונה - ואיך לחסוך באמצעות תזמון נכון",
    category: "תכנון",
    reading_time: 4,
    related_slugs: ["budget-checklist", "renovation-costs-2026"],
    content: `
# מתי הכי כדאי לשפץ? קיץ vs חורף

"מתי כדאי להתחיל?" - שאלה שכולם שואלים. התשובה תלויה בסדרי העדיפויות שלכם.

## הקיץ - העונה הפופולרית

### יתרונות
- מזג אוויר יציב (אין גשם שמשבש עבודה)
- ימים ארוכים = יותר שעות עבודה
- קל יותר לאוורר (חומרים מתייבשים מהר)
- הילדים בחופש = יותר גמישות

### חסרונות
- **עונת השיא** = קבלנים עמוסים
- מחירים גבוהים יותר (ביקוש גבוה)
- קשה למצוא קבלן פנוי
- חום קיצוני יכול להפריע לעובדים

## החורף - העונה השקטה

### יתרונות
- **מחירים נמוכים יותר** (פחות ביקוש)
- קבלנים יותר פנויים ויותר גמישים
- יותר תשומת לב לפרויקט שלכם

### חסרונות
- גשם יכול לעכב עבודות חיצוניות
- ימים קצרים = פחות שעות עבודה
- בעיות ייבוש (צבע, דבקים)

## אז מה עדיף?

**לעבודות פנים** (רוב השיפוצים) - החורף יכול להיות עדיף:
- חיסכון של 10-15% במחירים
- זמינות טובה יותר של קבלנים
- הגשם פחות משפיע

**לעבודות חוץ** (איטום גג, מרפסת) - עדיף קיץ:
- אי אפשר לאטם בגשם
- ייבוש חיוני

## הטיפ הכי טוב: פטור מארנונה

רבים לא יודעים: **אפשר לקבל פטור מארנונה בזמן שיפוץ**.

התנאים משתנים בין עיריות, אבל בדרך כלל:
- השיפוץ חייב להיות משמעותי (לא רק צביעה)
- צריך להגיש בקשה לעירייה
- הפטור יכול להיות ל-3-6 חודשים

**בדירה של 100 מ"ר זה יכול לחסוך אלפי שקלים.** שווה לבדוק.

## תכנון לפי העונה

### אם מתחילים בקיץ:
- הזמינו קבלן 2-3 חודשים מראש
- סגרו מחירים לפני העונה
- היו מוכנים לעיכובים קטנים

### אם מתחילים בחורף:
- וודאו שיש פתרון לייבוש (מפזרי חום)
- תכננו שעבודות חוץ יהיו בימים יבשים
- נצלו את הגמישות של הקבלן

## שורה תחתונה

אם יש לכם גמישות בתזמון - **שקלו חורף**. החיסכון יכול להיות משמעותי, והקבלנים יותר זמינים.

אם אתם חייבים לסיים עד תאריך מסוים - תכננו בהתאם ותזמינו קבלן מוקדם ככל האפשר.
`
  },
  {
    slug: "infrastructure",
    title: "חשמל ואינסטלציה - למה לא לחסוך בתשתיות",
    excerpt: "ההשקעה הכי חשובה בשיפוץ היא זו שלא רואים - וזו שתחסוך לכם בעיות",
    category: "תשתיות",
    reading_time: 4,
    related_slugs: ["bathroom-renovation", "common-mistakes"],
    content: `
# חשמל ואינסטלציה - למה לא לחסוך בתשתיות

"הצנרת נראית בסדר", "החשמל עובד" - אלה המשפטים שמובילים לבעיות הכי יקרות בשיפוץ.

## למה תשתיות זה קריטי

תשתיות הן הדבר היחיד בשיפוץ שאי אפשר לתקן בלי לפרק קירות. חשבו על זה:

- צינור חלוד? צריך לפרק קיר
- חשמל ישן? צריך לפרק קירות
- בעיית איטום? צריך לפרק רצפה

**תיקון תשתית אחרי שיפוץ עולה פי 5-10 מתיקון במהלך שיפוץ.**

## מתי חייבים להחליף

### חשמל
החליפו אם:
- הדירה בת 30+ שנה
- לוח החשמל ישן (נתיכים במקום מפסקים)
- אין הארקה לשקעים
- כבלים מאלומיניום (לא נחושת)

### אינסטלציה
החליפו אם:
- צנרת ברזל ישנה (חלודה)
- לחץ מים נמוך
- צבע מים חלוד
- הדירה בת 20+ שנה ולא הוחלף

## מה לשדרג בהזדמנות

אם כבר פותחים קירות, כדאי להוסיף:

### חשמל
- נקודות שקע נוספות (כולם צריכים יותר משקעים)
- נקודות רשת (Ethernet) - יציב יותר מ-WiFi
- הכנה למזגנים
- תאורה חכמה (הכנה לפחות)

### אינסטלציה
- ברזי מים חמים למקומות חדשים
- הכנה למכונת כביסה/מדיח במקום אחר
- נקודת מים למקרר עם מתקן מים

## היתרים ואישורים

שימו לב: עבודות מסוימות דורשות חשמלאי מוסמך ואישורים:
- הגדלת החיבור החשמלי
- התקנת לוח חשמל חדש
- חיבור מערכת גז

**אל תעבדו עם "מאסטר" לא מורשה.** חוץ מהסכנה, זה יכול להשפיע על הביטוח.

## עלויות התייחסות

לפי מחירוני שוק 2025-2026:
- החלפת לוח חשמל: 3,000-6,000₪
- נקודת חשמל חדשה: 150-250₪
- נקודת מים חדשה: 300-500₪
- החלפת צנרת אמבטיה: 2,000-4,000₪

## טיפ חשוב

**תעדו הכל לפני שסוגרים.**

צלמו את כל התשתיות לפני הטיח:
- איפה עוברים הצינורות
- איפה עוברים הכבלים
- איפה הקופסאות

בעוד 5 שנים, כשתרצו לתלות מדף, תודו לעצמכם.
`
  },
  {
    slug: "living-during-renovation",
    title: "איך לחיות בדירה במהלך שיפוץ",
    excerpt: "טיפים מעשיים לשרוד תקופת שיפוץ בלי להשתגע",
    category: "טיפים",
    reading_time: 4,
    related_slugs: ["budget-checklist", "best-time-to-renovate"],
    content: `
# איך לחיות בדירה במהלך שיפוץ

לא כולם יכולים לעזוב את הדירה לחודש-חודשיים. אם אתם נשארים - הנה איך לשרוד.

## האם זה בכלל אפשרי?

תלוי בסוג השיפוץ:

**אפשר להישאר:**
- שיפוץ חדר בודד
- צביעה
- החלפת רצפות (חדר אחרי חדר)

**קשה להישאר:**
- שיפוץ מטבח מלא (אין איפה לבשל)
- שיפוץ האמבטיה היחידה
- עבודות תשתית בכל הדירה

**כמעט בלתי אפשרי:**
- שיפוץ קומפלט

## כללי ברזל

### 1. בידוד אזור העבודה

הדבר הכי חשוב הוא להפריד בין אזור העבודה לאזור המגורים:
- יריעות פלסטיק כבדות בפתחים
- דלתות סגורות
- מסנן אבק אם אפשר

**האבק מגיע לכל מקום.** גם אם נראה לכם שסגרתם טוב.

### 2. הגנה על הרהיטים

- כסו הכל בניילון
- העבירו רהיטים יקרים למקום אחר
- שטיחים - להוציא מהדירה

### 3. לוח זמנים ברור

קבעו עם הקבלן:
- באיזה שעות עובדים
- איזה ימים
- מתי הפסקות

ככה תוכלו לתכנן את החיים סביב זה.

## טיפים מעשיים

### אוכל
- מיני מטבח זמני: צלחת חשמלית + מיקרוגל
- ארגון אזור עם קומקום וקפה
- מניות של אוכל שלא צריך בישול

### שינה
- אטמי אוזניים לבקרים (אם מתחילים לעבוד מוקדם)
- הרחקת חדר השינה מאזור העבודה
- סדינים לניקוי אבק

### ילדים וחיות
- לשקול לשלוח לסבא וסבתא בימים קשים
- לוודא שאזור העבודה חסום לגמרי
- לשים לב לחומרים מסוכנים (צבעים, דבקים)

## מתי עדיף פשוט לעזוב?

שקלו לעזוב אם:
- יש ילדים קטנים או אנשים עם רגישות לאבק
- השיפוץ יותר מ-3 שבועות
- עובדים מהבית ולא יכולים להתרכז
- אין אמבטיה/שירותים פונקציונליים

**חישוב מהיר:** חודש באיזור אחר (צימר, משפחה, Airbnb) יכול להיות שווה את השפיות הנפשית.

## תקשורת עם הקבלן

- עדכון יומי קצר (5 דקות)
- WhatsApp לתיאומים שוטפים
- ברור מראש: מתי אפשר להתקשר ומתי לא

## טיפ זהב

**תקבלו מפתח נוסף לקבלן** - שלא תצטרכו להיות שם לפתוח בכל בוקר ב-7:00.

וכן, רשמית: זה יהיה קשה. אבל זה נגמר. ואז יש לכם בית חדש.
`
  },
  {
    slug: "budget-checklist",
    title: "צ'קליסט לפני תחילת שיפוץ",
    excerpt: "כל מה שצריך להכין ולבדוק לפני שמתחילים - רשימה מלאה",
    category: "תכנון",
    reading_time: 6,
    related_slugs: ["renovation-costs-2026", "choosing-contractor"],
    content: `
# צ'קליסט לפני תחילת שיפוץ

לפני שפורצים את הקיר הראשון, יש המון דברים לסגור. הנה הרשימה המלאה.

## שלב 1: תכנון (4-8 שבועות לפני)

### הגדרת היקף
- [ ] מה בדיוק משפצים?
- [ ] מה לא משפצים (חשוב לא פחות)?
- [ ] מה סדר העדיפויות אם צריך לקצץ?

### תקציב
- [ ] כמה יש להשקיע?
- [ ] הוספת 15-20% לבלת"מים
- [ ] מקור מימון (חיסכון? הלוואה?)
- [ ] הפרדה: עבודה, חומרים, ריהוט

### תכנון מקצועי
- [ ] האם צריך אדריכל/מעצב?
- [ ] האם צריך היתר בנייה?
- [ ] האם צריך קונסטרוקטור?

## שלב 2: בחירת קבלן (3-4 שבועות לפני)

### איסוף הצעות
- [ ] קבלת לפחות 3 הצעות
- [ ] בדיקת המלצות לכל קבלן
- [ ] ביקור בפרויקט קודם

### בדיקת הצעות
- [ ] כתב כמויות מפורט מכל קבלן
- [ ] השוואה לפי פריטים
- [ ] בירור מה לא כלול

### בחירה וחוזה
- [ ] בחירת קבלן
- [ ] חוזה כתוב מפורט
- [ ] לוח זמנים עם תאריכים
- [ ] תנאי תשלום לפי שלבים
- [ ] סעיף אחריות

## שלב 3: לפני תחילת עבודה (1-2 שבועות לפני)

### הכנת הדירה
- [ ] פינוי רהיטים מאזור העבודה
- [ ] כיסוי מה שנשאר
- [ ] הוצאת דברי ערך
- [ ] צילום מצב קיים (לפני)

### לוגיסטיקה
- [ ] איפה מכולת הפסולת?
- [ ] איפה ישמרו חומרים?
- [ ] מפתח לקבלן
- [ ] חניה לקבלן?

### עירייה וביטוח
- [ ] בדיקת צורך בהיתר
- [ ] עדכון ועד בית
- [ ] בדיקת ביטוח דירה
- [ ] בקשת פטור ארנונה (אם רלוונטי)

### שכנים
- [ ] הודעה לשכנים על השיפוץ
- [ ] תיאום שעות עבודה מותרות
- [ ] פרטי קשר במקרה של בעיה

## שלב 4: במהלך השיפוץ

### מעקב יומי
- [ ] תיעוד התקדמות בתמונות
- [ ] עדכון תקציב שוטף
- [ ] בדיקת עבודות לפני סגירה (תשתיות!)

### תקשורת
- [ ] עדכון יומי עם הקבלן
- [ ] מענה מהיר לשאלות
- [ ] תיעוד כל שינוי בכתב

### תשלומים
- [ ] תשלום לפי שלבים בלבד
- [ ] שמירת כל הקבלות
- [ ] לא לשלם על עבודה שלא הסתיימה

## שלב 5: סיום השיפוץ

### בדיקה סופית
- [ ] סיור בדיקה עם הקבלן
- [ ] רשימת תיקונים
- [ ] תאריך לביצוע תיקונים

### מסמכים
- [ ] אישורי עבודה (חשמלאי מוסמך וכו')
- [ ] אחריות בכתב
- [ ] תעודות יצרן לציוד

### סגירה
- [ ] תשלום אחרון (אחרי תיקונים!)
- [ ] צילום מצב סופי
- [ ] שמירת כל המסמכים

## מספרים לזכור

לפי מחירוני שוק 2025-2026:
- שיפוץ קוסמטי: 300-600₪/מ"ר
- שיפוץ מקיף: 1,200-2,000₪/מ"ר
- תקציב בלת"מים: 15-20% נוסף
- מכולת פסולת: 1,000-1,500₪

## טיפ אחרון

**הדפיסו את הרשימה הזו** ועברו עליה לפני כל שלב. שיפוץ מוצלח מתחיל בהכנה טובה.

בהצלחה! 🏠
`
  }
];

// =============================================================================
// PRICING CATEGORIES & ITEMS DATA (from pricing-data.ts)
// =============================================================================

const pricingCategories = [
  { key: "general", name: "General Renovation", name_he: "שיפוץ כללי (מחיר למ\"ר)", sort_order: 1 },
  { key: "bathroom", name: "Bathroom", name_he: "חדר אמבטיה", sort_order: 2 },
  { key: "kitchen", name: "Kitchen", name_he: "מטבח", sort_order: 3 },
  { key: "flooring", name: "Flooring", name_he: "ריצוף (למ\"ר)", sort_order: 4 },
  { key: "electrical", name: "Electrical", name_he: "חשמל", sort_order: 5 },
  { key: "plumbing", name: "Plumbing", name_he: "אינסטלציה", sort_order: 6 },
  { key: "drywall", name: "Drywall/Gypsum", name_he: "גבס (למ\"ר)", sort_order: 7 },
  { key: "aluminum", name: "Aluminum & Windows", name_he: "אלומיניום", sort_order: 8 },
  { key: "painting", name: "Painting", name_he: "צביעה", sort_order: 9 },
  { key: "waterproofing", name: "Waterproofing", name_he: "איטום (למ\"ר)", sort_order: 10 },
];

const pricingItems: Record<string, Array<{key: string, name_he: string, min: number, max: number, unit?: string}>> = {
  general: [
    { key: "cosmetic", name_he: "קוסמטי (צביעה, תיקונים קטנים)", min: 450, max: 700, unit: "sqm" },
    { key: "complete", name_he: "שיפוץ קומפלט", min: 1400, max: 2000, unit: "sqm" },
    { key: "luxury", name_he: "יוקרתי", min: 3000, max: 4000, unit: "sqm" },
  ],
  bathroom: [
    { key: "budget", name_he: "תקציב נמוך", min: 16000, max: 25000 },
    { key: "standard", name_he: "סטנדרטי", min: 25000, max: 32000 },
    { key: "luxury", name_he: "יוקרתי", min: 32000, max: 45000 },
    { key: "demolition", name_he: "פירוק ופינוי", min: 4500, max: 6500 },
    { key: "plumbing_pipes", name_he: "צנרת מים (6 נקודות)", min: 9600, max: 11000 },
    { key: "flooring", name_he: "ריצוף 7 מ\"ר", min: 1300, max: 1700 },
    { key: "wall_tiles", name_he: "חיפוי קירות 28 מ\"ר", min: 4500, max: 6000 },
    { key: "waterproofing", name_he: "איטום", min: 2000, max: 3000 },
  ],
  kitchen: [
    { key: "refresh", name_he: "חידוש (דלתות/פרזול)", min: 5000, max: 15000 },
    { key: "new_standard", name_he: "מטבח חדש סטנדרטי", min: 35000, max: 50000 },
    { key: "new_luxury", name_he: "יוקרתי", min: 70000, max: 100000 },
    { key: "door_formica", name_he: "דלת פורמייקה", min: 200, max: 500, unit: "unit" },
    { key: "door_polymer", name_he: "דלת פולימר", min: 400, max: 700, unit: "unit" },
    { key: "door_glass", name_he: "דלת זכוכית", min: 400, max: 800, unit: "unit" },
  ],
  flooring: [
    { key: "ceramic_80x80", name_he: "קרמיקה 80x80 כולל פירוק", min: 450, max: 700, unit: "sqm" },
    { key: "tile_gluing", name_he: "הדבקת ריצוף", min: 190, max: 250, unit: "sqm" },
    { key: "laminate", name_he: "פרקט למינציה", min: 90, max: 200, unit: "sqm" },
    { key: "solid_wood", name_he: "פרקט עץ גושני", min: 338, max: 620, unit: "sqm" },
    { key: "outdoor_stone", name_he: "אבן טבעית חוץ", min: 250, max: 350, unit: "sqm" },
  ],
  electrical: [
    { key: "visit", name_he: "ביקור לבדיקה", min: 289, max: 377 },
    { key: "light_fixture", name_he: "גוף תאורה צמוד תקרה", min: 255, max: 354 },
    { key: "new_outlet", name_he: "נקודת חשמל חדשה (עד 3 מ')", min: 513, max: 838 },
    { key: "three_phase_outlet", name_he: "שקע תלת פאזי לכיריים", min: 586, max: 1001 },
    { key: "single_phase_panel", name_he: "לוח חד פאזי", min: 1200, max: 1800 },
    { key: "three_phase_panel", name_he: "לוח תלת פאזי", min: 2000, max: 2900 },
    { key: "three_phase_upgrade", name_he: "מעבר לתלת פאזי", min: 3000, max: 5000 },
    { key: "ac_outlet", name_he: "נקודה למזגן", min: 700, max: 850 },
    { key: "ev_charger", name_he: "עמדת טעינה לרכב", min: 2700, max: 4365 },
  ],
  plumbing: [
    { key: "visit", name_he: "ביקור", min: 260, max: 338 },
    { key: "kitchen_blockage", name_he: "פתיחת סתימה במטבח", min: 344, max: 485 },
    { key: "toilet_blockage", name_he: "סתימה בשירותים", min: 379, max: 566 },
    { key: "faucet_replacement", name_he: "החלפת ברז (ללא הברז)", min: 306, max: 414 },
    { key: "water_point", name_he: "נקודת מים (חם/קר/ביוב)", min: 800, max: 1500 },
    { key: "hanging_toilet", name_he: "אסלה תלויה + ניאגרה סמויה", min: 3500, max: 4300 },
  ],
  drywall: [
    { key: "wall", name_he: "קיר גבס", min: 180, max: 250, unit: "sqm" },
    { key: "ceiling_drop", name_he: "הנמכת תקרה", min: 200, max: 500, unit: "sqm" },
    { key: "acoustic_ceiling", name_he: "תקרה אקוסטית", min: 180, max: 300, unit: "sqm" },
    { key: "tv_unit", name_he: "מזנון גבס", min: 3500, max: 7000 },
  ],
  aluminum: [
    { key: "windows", name_he: "חלונות (למ\"ר)", min: 1200, max: 4500, unit: "sqm" },
    { key: "balcony_enclosure", name_he: "סגירת מרפסת", min: 1000, max: 2000, unit: "sqm" },
    { key: "screen", name_he: "רשת לחלון", min: 250, max: 350, unit: "unit" },
    { key: "shutter_3sqm", name_he: "תריס 3 מ\"ר", min: 1500, max: 1600 },
    { key: "electric_motor", name_he: "מנוע לתריס חשמלי", min: 600, max: 2800 },
  ],
  painting: [
    { key: "single_wall", name_he: "קיר בודד", min: 300, max: 600 },
    { key: "bathroom", name_he: "חדר אמבטיה + תקרה", min: 800, max: 1500 },
    { key: "kitchen", name_he: "מטבח + תקרה", min: 800, max: 1050 },
    { key: "2_rooms", name_he: "דירת 2 חדרים", min: 2500, max: 3000 },
    { key: "3_rooms", name_he: "דירת 3 חדרים", min: 4000, max: 4500 },
    { key: "4_rooms", name_he: "דירת 4 חדרים", min: 5000, max: 6000 },
    { key: "5_rooms", name_he: "דירת 5 חדרים", min: 6000, max: 7000 },
  ],
  waterproofing: [
    { key: "balcony_bitumen", name_he: "מרפסת ביריעות", min: 700, max: 1000, unit: "sqm" },
    { key: "roof_bitumen", name_he: "גג ביריעות", min: 110, max: 130, unit: "sqm" },
    { key: "roof_tar", name_he: "גג בזפת", min: 50, max: 65, unit: "sqm" },
    { key: "wall_exterior", name_he: "קיר חיצוני", min: 100, max: 200, unit: "sqm" },
  ],
};

const pricingLocations = [
  { name: "tel_aviv", name_he: "תל אביב", multiplier: 1.25 },
  { name: "jerusalem", name_he: "ירושלים", multiplier: 1.15 },
  { name: "center", name_he: "מרכז", multiplier: 1.00 },
  { name: "sharon", name_he: "שרון/שפלה", multiplier: 0.95 },
  { name: "haifa_north", name_he: "חיפה/צפון", multiplier: 0.85 },
  { name: "south", name_he: "דרום", multiplier: 0.80 },
];

// =============================================================================
// MIGRATION FUNCTIONS
// =============================================================================

async function migrateArticles() {
  console.log('📚 Migrating articles...');
  
  // Clear existing articles
  await supabase.from('articles').delete().neq('id', '00000000-0000-0000-0000-000000000000');
  
  // Insert all articles
  const { data, error } = await supabase.from('articles').insert(articles).select();
  
  if (error) {
    console.error('❌ Error inserting articles:', error);
    throw error;
  }
  
  console.log(`✅ Inserted ${data?.length || 0} articles`);
}

async function migratePricingData() {
  console.log('💰 Migrating pricing data...');
  
  // Clear existing data
  await supabase.from('pricing_items').delete().neq('id', '00000000-0000-0000-0000-000000000000');
  await supabase.from('pricing_categories').delete().neq('id', '00000000-0000-0000-0000-000000000000');
  await supabase.from('pricing_locations').delete().neq('id', '00000000-0000-0000-0000-000000000000');
  
  // Insert categories
  const { data: categories, error: catError } = await supabase
    .from('pricing_categories')
    .insert(pricingCategories)
    .select();
  
  if (catError) {
    console.error('❌ Error inserting categories:', catError);
    throw catError;
  }
  console.log(`✅ Inserted ${categories?.length || 0} categories`);
  
  // Create category lookup
  const categoryMap = new Map(categories?.map(c => [c.key, c.id]) || []);
  
  // Insert items for each category
  let totalItems = 0;
  for (const [catKey, items] of Object.entries(pricingItems)) {
    const categoryId = categoryMap.get(catKey);
    if (!categoryId) {
      console.warn(`⚠️ No category found for key: ${catKey}`);
      continue;
    }
    
    const itemsToInsert = items.map((item, idx) => ({
      category_id: categoryId,
      key: item.key,
      name_he: item.name_he,
      min_price: item.min,
      max_price: item.max,
      unit: item.unit || 'unit',
      sort_order: idx + 1,
    }));
    
    const { error: itemError } = await supabase.from('pricing_items').insert(itemsToInsert);
    if (itemError) {
      console.error(`❌ Error inserting items for ${catKey}:`, itemError);
      throw itemError;
    }
    totalItems += items.length;
  }
  console.log(`✅ Inserted ${totalItems} pricing items`);
  
  // Insert locations
  const { data: locations, error: locError } = await supabase
    .from('pricing_locations')
    .insert(pricingLocations)
    .select();
  
  if (locError) {
    console.error('❌ Error inserting locations:', locError);
    throw locError;
  }
  console.log(`✅ Inserted ${locations?.length || 0} locations`);
}

async function main() {
  console.log('🚀 Starting migration to Supabase...\n');
  
  try {
    await migrateArticles();
    console.log('');
    await migratePricingData();
    console.log('\n✨ Migration completed successfully!');
  } catch (error) {
    console.error('\n💥 Migration failed:', error);
    process.exit(1);
  }
}

main();
